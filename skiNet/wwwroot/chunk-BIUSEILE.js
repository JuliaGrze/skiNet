import{a as T,c as H}from"./chunk-VRZAEPS3.js";import{a as S,d as h}from"./chunk-D2PC2S6P.js";import{b as L}from"./chunk-Z2X6A25X.js";import{B as J,C as d,D as M,G as _,I as $,J as I,K as E,M as w,O as f,Q as R,R as z,U as D,x as N,z as u}from"./chunk-G3QKCDS2.js";import{Aa as c,Fa as v,Ka as p,Pa as g,Qa as U,Sa as j,Ta as k,U as l,Ua as i,Va as r,Wa as s,Wc as F,Yb as O,_b as y,ab as C,bb as b,eb as V,nb as m,ob as x,pb as q,sa as n,wa as B}from"./chunk-NLIBKF6G.js";var A=class o{fb=l(w);accountService=l(L);router=l(y);activateRoute=l(O);returnUrl="/shop";constructor(){let e=this.activateRoute.snapshot.queryParams.returnUrl;e&&(this.returnUrl=e)}loginForm=this.fb.group({email:[""],password:[""]});onSubmit(){this.accountService.login(this.loginForm.value).subscribe({next:()=>{this.accountService.getUserInfo().subscribe(()=>{this.router.navigateByUrl(this.returnUrl)})}})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=c({type:o,selectors:[["app-login"]],decls:15,vars:1,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["appearance","outline",1,"w-full","mb-4"],["formControlName","email","type","email","placeholder","name@example.com","matInput",""],["formControlName","password","type","password","placeholder","Password","matInput",""],["mat-flat-button","","type","submit",1,"w-full","py-2"]],template:function(t,a){t&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return a.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4,"Login"),r()(),i(5,"mat-form-field",4)(6,"mat-label"),m(7,"Email Address"),r(),s(8,"input",5),r(),i(9,"mat-form-field",4)(10,"mat-label"),m(11,"Password"),r(),s(12,"input",6),r(),i(13,"button",7),m(14," Sign in "),r()()()),t&2&&(n(),p("formGroup",a.loginForm))},dependencies:[f,_,N,d,M,I,E,h,S,D,T,R,F],encapsulation:2})};function Z(o,e){if(o&1&&(i(0,"mat-error"),m(1),r()),o&2){let t=b();n(),q("",t.label," is required ")}}function tt(o,e){if(o&1&&(i(0,"mat-error"),m(1),r()),o&2){let t=b();n(),q("",t.label," is invalid ")}}var G=class o{constructor(e){this.controlDir=e;e.valueAccessor=this}label="";type="text";get control(){return this.controlDir.control}writeValue(e){}registerOnChange(e){}registerOnTouched(e){}setDisabledState(e){}static \u0275fac=function(t){return new(t||o)(B(J,2))};static \u0275cmp=c({type:o,selectors:[["app-text-input"]],inputs:{label:"label",type:"type"},decls:6,vars:6,consts:[["appearance","outline",1,"w-full","mb-4"],["matInput","",3,"formControl","type","placeholder"]],template:function(t,a){t&1&&(i(0,"mat-form-field",0)(1,"mat-label"),m(2),r(),s(3,"input",1),v(4,Z,2,1,"mat-error")(5,tt,2,1,"mat-error"),r()),t&2&&(n(2),x(a.label),n(),V("type",a.type),V("placeholder",a.label),p("formControl",a.control),n(),g(a.control.hasError("required")?4:-1),n(),g(a.control.hasError("email")?5:-1))},dependencies:[f,N,d,$,D,T,z,R],encapsulation:2})};function et(o,e){if(o&1&&(i(0,"li"),m(1),r()),o&2){let t=e.$implicit;n(),x(t)}}function ot(o,e){if(o&1&&(i(0,"div",8)(1,"ul",10),j(2,et,2,1,"li",null,U),r()()),o&2){let t=b();n(2),k(t.validationErrors)}}var P=class o{fb=l(w);accountService=l(L);router=l(y);snack=l(H);validationErrors;registerForm=this.fb.group({firstName:["",u.required],lastName:["",u.required],email:["",[u.required,u.email]],password:["",u.required]});onSubmit(){this.accountService.register(this.registerForm.value).subscribe({next:()=>{this.snack.success("Registration successful - you can now login"),this.router.navigateByUrl("/account/login")},error:e=>this.validationErrors=e})}static \u0275fac=function(t){return new(t||o)};static \u0275cmp=c({type:o,selectors:[["app-register"]],decls:12,vars:3,consts:[[1,"max-w-lg","mx-auto","mt-32","p-8","bg-white"],[3,"ngSubmit","formGroup"],[1,"text-center","mb-6"],[1,"text-3xl","font-semibold","text-primary"],["label","First name","formControlName","firstName","type","text"],["label","Last name","formControlName","lastName","type","text"],["label","Email","formControlName","email","type","email"],["label","Password","formControlName","password","type","password"],[1,"mb-3","p-4","bg-red-100","text-red-600"],["mat-flat-button","","type","submit",1,"w-full","py-2",3,"disabled"],[1,"list-disc","px-3"]],template:function(t,a){t&1&&(i(0,"mat-card",0)(1,"form",1),C("ngSubmit",function(){return a.onSubmit()}),i(2,"div",2)(3,"h1",3),m(4,"Register"),r()(),s(5,"app-text-input",4)(6,"app-text-input",5)(7,"app-text-input",6)(8,"app-text-input",7),v(9,ot,4,0,"div",8),i(10,"button",9),m(11," Register "),r()()()),t&2&&(n(),p("formGroup",a.registerForm),n(8),g(a.validationErrors?9:-1),n(),p("disabled",a.registerForm.invalid))},dependencies:[f,_,d,M,I,E,h,S,F,G],encapsulation:2})};var Tt=[{path:"login",component:A},{path:"register",component:P}];export{Tt as accountRouttes};
